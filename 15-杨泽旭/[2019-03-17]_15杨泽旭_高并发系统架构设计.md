# Java刷题小分队-0317 15-杨泽旭
## 用Java做一个大流量、高并发的网站应该怎么样进行底层构架？采用哪些框架技术比较适合？
## Tips : 从框架技术选型。进行相关知识点拓展。举例：负载均衡。好处。坏处。使用场景等方面拓展
### 架构阶段框架技术选型
微服务框架：spring boot+dubbo+zk。各个功能模块服务化，可以根据流量变化横向扩容。
微服务监控：普罗米修斯。从服务端监控系统运行情况，异常情况可以及时报警。
缓存：Redis。对于经常需要读取的数据，可以在第一次查询之后放到缓存里，避免重复查询耗时。
队列：rabbitMq、rocketMq。对于服务方的调用可以采用请求队列的方式，服务端自己从队列中取。这种方式可以去峰值，服务端的瞬时压力不会太大。
数据：MySQL + mongoDb + ftp服务器。MySQL设计可以采用主从库读写分离，增删改操作主库，读操作从库。避免写操作影响读操作效率。表结构设计避免自增主键的外键关联、优化查询、增加索引等，优化查询语句的速度。对于大数据量的请求报文、响应报文等的存储，可以放到nosql库mongoDb中。而对于图片、文件这种，要放到ftp服务器上，避免直接存入数据库。
定时任务：elastic job 分布式定时任务。可以动态扩容，分片执行任务。
- - - -
以上是我根据自己的理解给出的回答，这个题目范围比较大，每个点都值得扩展好好研究一番。先就给我自己的回答，待我补课一段时间后，再给出一份详细的回答。
下面一段是在网上看到的高可用系统的设计生命周期，每个点都有一系列工具和技术点要去学习。先贴出来：
> 系统高可用建设要在整个系统的生命周期去考虑，因为一旦某个环节出错，之后可能很难弥补。高可用系统的生命周期包括：  
> **架构阶段**：架构阶段主要考虑系统的可扩展性和容错性，要避免系统出现单点问题。例如多机房单元化部署，即使某个城市的某个机房出现整体故障，仍然不会影响整体网站的运转。  
> **编码阶段**：编码最重要的是保证代码的健壮性，例如涉及远程调用问题时，要设置合理的超时退出机制，防止被其他系统拖垮，也要对调用的返回结果集有预期，防止返回的结果超出程序处理范围，最常见的做法就是对错误异常进行捕获，对无法预料的错误要有默认处理结果。  
> **测试阶段**：测试主要是保证测试用例的覆盖度，保证最坏情况发生时，我们也有相应的处理流程。  
> **发布阶段**：发布时也有一些地方需要注意，因为发布时最容易出现错误，因此要有紧急的回滚机制。  
> **运行阶段**：运行时是系统的常态，系统大部分时间都会处于运行态，运行态最重要的是对系统的监控要准确及时，发现问题能够准确报警并且报警数据要准确详细，以便于排查问题。  
> **故障发生**：故障发生时首先最重要的就是及时止损，例如由于程序问题导致商品价格错误，那就要及时下架商品或者关闭购买链接，防止造成重大资产损失。然后就是要能够及时恢复服务，并定位原因解决问题。  
